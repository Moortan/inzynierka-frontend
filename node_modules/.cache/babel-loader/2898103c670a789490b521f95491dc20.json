{"ast":null,"code":"import _slicedToArray from\"/Users/sleniart/projects/react-front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/sleniart/projects/react-front/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import moment from'moment';import{verifyTokenAsync}from\"../asyncActions/authAsyncActions\";import{setAuthToken}from'../services/auth';import{addTeamAsync}from'../asyncActions/authAsyncActions';function AddTeam(){var dispatch=useDispatch();var teamObj=useSelector(function(state){return state.team;});var authObj=useSelector(function(state){return state.auth;});var addTeamLoading=teamObj.addTeamLoading,addTeamError=teamObj.addTeamError,addTeamMessage=teamObj.addTeamMessage;var user=authObj.user,token=authObj.token,expiredAt=authObj.expiredAt;var teamName=useFormInput('');var teamTag=useFormInput('');var game=useFormInput('');var teamMember1=useFormInput('');var teamMember2=useFormInput('');var teamMember3=useFormInput('');var teamMember4=useFormInput('');var teamMember5=useFormInput('');var teamMembers=[teamMember1.value,teamMember2.value,teamMember3.value,teamMember4.value,teamMember5.value];var handleAddTeam=function handleAddTeam(){dispatch(addTeamAsync(user.username,teamName.value,teamMembers,teamTag.value,game.value));};// set timer to renew token\nuseEffect(function(){setAuthToken(token);var verifyTokenTimer=setTimeout(function(){dispatch(verifyTokenAsync(true));},moment(expiredAt).diff()-10*1000);return function(){clearTimeout(verifyTokenTimer);};},[expiredAt,token]);return/*#__PURE__*/_jsxs(\"div\",{children:[\"Add a new team \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Team Name \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},teamName),{},{autoComplete:\"off\"}))]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10},children:[\"Team Tag \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},teamTag),{},{autoComplete:\"off\"}))]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10},children:[\"Game \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"radio\"},game),{},{value:\"League of Legends\",name:\"game\",autoComplete:\"off\"})),\" League of Legends \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"radio\"},game),{},{value:\"Counter Strike: Global Offensive\",name:\"game\",autoComplete:\"off\"})),\" Couter Strike: Global Offensive \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"radio\"},game),{},{value:\"Dota 2\",name:\"game\",autoComplete:\"off\"})),\" Dota 2 \",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10},children:[\"Team Member #1 \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},teamMember1),{},{autoComplete:\"off\"})),/*#__PURE__*/_jsx(\"br\",{}),\"Team Member #2 \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},teamMember2),{},{autoComplete:\"off\"})),/*#__PURE__*/_jsx(\"br\",{}),\"Team Member #3 \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},teamMember3),{},{autoComplete:\"off\"})),/*#__PURE__*/_jsx(\"br\",{}),\"Team Member #4 \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},teamMember4),{},{autoComplete:\"off\"})),/*#__PURE__*/_jsx(\"br\",{}),\"Team Member #5 \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},teamMember5),{},{autoComplete:\"off\"})),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"input\",{type:\"button\",style:{marginTop:10},value:addTeamLoading?'Adding...':'Add new team',onClick:handleAddTeam,disabled:addTeamLoading}),addTeamMessage?/*#__PURE__*/_jsxs(\"div\",{style:{color:'green',marginTop:10},children:[\" \",addTeamMessage]}):/*#__PURE__*/_jsxs(\"div\",{style:{color:'red',marginTop:10},children:[\" \",addTeamError]})]});}var useFormInput=function useFormInput(initialValue){var _useState=useState(initialValue),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var handleChange=function handleChange(e){setValue(e.target.value);};return{value:value,onChange:handleChange};};export default AddTeam;","map":{"version":3,"sources":["/Users/sleniart/projects/react-front/src/pages/AddTeam.js"],"names":["React","useEffect","useState","useDispatch","useSelector","moment","verifyTokenAsync","setAuthToken","addTeamAsync","AddTeam","dispatch","teamObj","state","team","authObj","auth","addTeamLoading","addTeamError","addTeamMessage","user","token","expiredAt","teamName","useFormInput","teamTag","game","teamMember1","teamMember2","teamMember3","teamMember4","teamMember5","teamMembers","value","handleAddTeam","username","verifyTokenTimer","setTimeout","diff","clearTimeout","marginTop","color","initialValue","setValue","handleChange","e","target","onChange"],"mappings":"qUAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CAGA,OAASC,gBAAT,KAAiC,kCAAjC,CACA,OAASC,YAAT,KAA6B,kBAA7B,CAIA,OAASC,YAAT,KAA6B,kCAA7B,CAGA,QAASC,CAAAA,OAAT,EAAmB,CAEf,GAAMC,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CACA,GAAMQ,CAAAA,OAAO,CAAGP,WAAW,CAAC,SAAAQ,KAAK,QAAIA,CAAAA,KAAK,CAACC,IAAV,EAAN,CAA3B,CACA,GAAMC,CAAAA,OAAO,CAAGV,WAAW,CAAC,SAAAQ,KAAK,QAAIA,CAAAA,KAAK,CAACG,IAAV,EAAN,CAA3B,CAJe,GAMPC,CAAAA,cANO,CAMyCL,OANzC,CAMPK,cANO,CAMSC,YANT,CAMyCN,OANzC,CAMSM,YANT,CAMuBC,cANvB,CAMyCP,OANzC,CAMuBO,cANvB,IAOPC,CAAAA,IAPO,CAOoBL,OAPpB,CAOPK,IAPO,CAODC,KAPC,CAOoBN,OAPpB,CAODM,KAPC,CAOMC,SAPN,CAOoBP,OAPpB,CAOMO,SAPN,CASf,GAAMC,CAAAA,QAAQ,CAAGC,YAAY,CAAC,EAAD,CAA7B,CACA,GAAMC,CAAAA,OAAO,CAAGD,YAAY,CAAC,EAAD,CAA5B,CACA,GAAME,CAAAA,IAAI,CAAGF,YAAY,CAAC,EAAD,CAAzB,CACA,GAAMG,CAAAA,WAAW,CAAGH,YAAY,CAAC,EAAD,CAAhC,CACA,GAAMI,CAAAA,WAAW,CAAGJ,YAAY,CAAC,EAAD,CAAhC,CACA,GAAMK,CAAAA,WAAW,CAAGL,YAAY,CAAC,EAAD,CAAhC,CACA,GAAMM,CAAAA,WAAW,CAAGN,YAAY,CAAC,EAAD,CAAhC,CACA,GAAMO,CAAAA,WAAW,CAAGP,YAAY,CAAC,EAAD,CAAhC,CAEA,GAAMQ,CAAAA,WAAW,CAAG,CAACL,WAAW,CAACM,KAAb,CAAoBL,WAAW,CAACK,KAAhC,CACpBJ,WAAW,CAACI,KADQ,CACDH,WAAW,CAACG,KADX,CACkBF,WAAW,CAACE,KAD9B,CAApB,CAGA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CACxBvB,QAAQ,CAACF,YAAY,CAACW,IAAI,CAACe,QAAN,CAAgBZ,QAAQ,CAACU,KAAzB,CAAgCD,WAAhC,CACjBP,OAAO,CAACQ,KADS,CACFP,IAAI,CAACO,KADH,CAAb,CAAR,CAEH,CAHD,CAKA;AACA/B,SAAS,CAAC,UAAM,CACZM,YAAY,CAACa,KAAD,CAAZ,CACA,GAAMe,CAAAA,gBAAgB,CAAGC,UAAU,CAAC,UAAM,CACtC1B,QAAQ,CAACJ,gBAAgB,CAAC,IAAD,CAAjB,CAAR,CACH,CAFkC,CAEhCD,MAAM,CAACgB,SAAD,CAAN,CAAkBgB,IAAlB,GAA2B,GAAK,IAFA,CAAnC,CAGA,MAAO,WAAM,CACTC,YAAY,CAACH,gBAAD,CAAZ,CACH,CAFD,CAGH,CARQ,CAQN,CAACd,SAAD,CAAYD,KAAZ,CARM,CAAT,CAUA,mBAEI,sDACmB,aADnB,cACyB,aADzB,cAEI,iDACc,aADd,cAEI,0CAAO,IAAI,CAAC,MAAZ,EAAuBE,QAAvB,MAAiC,YAAY,CAAC,KAA9C,GAFJ,GAFJ,cAMI,aAAK,KAAK,CAAE,CAAEiB,SAAS,CAAE,EAAb,CAAZ,oCACa,aADb,cAEI,0CAAO,IAAI,CAAC,MAAZ,EAAuBf,OAAvB,MAAgC,YAAY,CAAC,KAA7C,GAFJ,GANJ,cAUI,aAAK,KAAK,CAAE,CAAEe,SAAS,CAAE,EAAb,CAAZ,gCACS,aADT,cAEI,0CAAO,IAAI,CAAC,OAAZ,EAAwBd,IAAxB,MAA8B,KAAK,CAAG,mBAAtC,CAA0D,IAAI,CAAG,MAAjE,CAAwE,YAAY,CAAC,KAArF,GAFJ,oCAEoH,aAFpH,cAGI,0CAAO,IAAI,CAAC,OAAZ,EAAwBA,IAAxB,MAA8B,KAAK,CAAG,kCAAtC,CAAwE,IAAI,CAAG,MAA/E,CAAsF,YAAY,CAAC,KAAnG,GAHJ,kDAGgJ,aAHhJ,cAII,0CAAO,IAAI,CAAC,OAAZ,EAAwBA,IAAxB,MAA8B,KAAK,CAAG,QAAtC,CAA8C,IAAI,CAAG,MAArD,CAA4D,YAAY,CAAC,KAAzE,GAJJ,yBAI6F,aAJ7F,GAVJ,cAgBI,aAAK,KAAK,CAAE,CAAEc,SAAS,CAAE,EAAb,CAAZ,0CACmB,aADnB,cAEI,0CAAO,IAAI,CAAC,MAAZ,EAAuBb,WAAvB,MAAoC,YAAY,CAAC,KAAjD,GAFJ,cAE6D,aAF7D,gCAGmB,aAHnB,cAII,0CAAO,IAAI,CAAC,MAAZ,EAAuBC,WAAvB,MAAoC,YAAY,CAAC,KAAjD,GAJJ,cAI6D,aAJ7D,gCAKmB,aALnB,cAMI,0CAAO,IAAI,CAAC,MAAZ,EAAuBC,WAAvB,MAAoC,YAAY,CAAC,KAAjD,GANJ,cAM6D,aAN7D,gCAOmB,aAPnB,cAQI,0CAAO,IAAI,CAAC,MAAZ,EAAuBC,WAAvB,MAAoC,YAAY,CAAC,KAAjD,GARJ,cAQ6D,aAR7D,gCASmB,aATnB,cAUI,0CAAO,IAAI,CAAC,MAAZ,EAAuBC,WAAvB,MAAoC,YAAY,CAAC,KAAjD,GAVJ,cAU6D,aAV7D,GAhBJ,cA4BI,cACI,IAAI,CAAC,QADT,CAEI,KAAK,CAAE,CAAES,SAAS,CAAE,EAAb,CAFX,CAGI,KAAK,CAAEvB,cAAc,CAAG,WAAH,CAAiB,cAH1C,CAII,OAAO,CAAEiB,aAJb,CAKI,QAAQ,CAAEjB,cALd,EA5BJ,CAkCKE,cAAc,cACT,aAAM,KAAK,CAAI,CAACsB,KAAK,CAAE,OAAR,CAAiBD,SAAS,CAAE,EAA5B,CAAf,eAAmDrB,cAAnD,GADS,cAET,aAAM,KAAK,CAAI,CAACsB,KAAK,CAAE,KAAR,CAAeD,SAAS,CAAE,EAA1B,CAAf,eAAiDtB,YAAjD,GApCV,GAFJ,CA0CH,CAED,GAAMM,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAkB,YAAY,CAAI,eACPvC,QAAQ,CAACuC,YAAD,CADD,wCAC1BT,KAD0B,eACnBU,QADmB,eAGjC,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,CAAC,CAAI,CACtBF,QAAQ,CAACE,CAAC,CAACC,MAAF,CAASb,KAAV,CAAR,CACH,CAFD,CAGA,MAAO,CACHA,KAAK,CAALA,KADG,CAEHc,QAAQ,CAAEH,YAFP,CAAP,CAIH,CAVD,CAYA,cAAelC,CAAAA,OAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport moment from 'moment';\n\n\nimport { verifyTokenAsync } from \"../asyncActions/authAsyncActions\";\nimport { setAuthToken } from '../services/auth';\n\n\n\nimport { addTeamAsync } from '../asyncActions/authAsyncActions'\n\n\nfunction AddTeam() {\n\n    const dispatch = useDispatch();\n    const teamObj = useSelector(state => state.team);\n    const authObj = useSelector(state => state.auth);\n\n    const { addTeamLoading, addTeamError, addTeamMessage} = teamObj;\n    const { user, token, expiredAt } = authObj;\n\n    const teamName = useFormInput('');\n    const teamTag = useFormInput('');\n    const game = useFormInput('');\n    const teamMember1 = useFormInput('');\n    const teamMember2 = useFormInput('');\n    const teamMember3 = useFormInput('');\n    const teamMember4 = useFormInput('');\n    const teamMember5 = useFormInput('');\n\n    const teamMembers = [teamMember1.value, teamMember2.value,\n    teamMember3.value, teamMember4.value, teamMember5.value]\n\n    const handleAddTeam = () => {\n        dispatch(addTeamAsync(user.username, teamName.value, teamMembers,\n            teamTag.value, game.value))\n    }\n\n    // set timer to renew token\n    useEffect(() => {\n        setAuthToken(token);\n        const verifyTokenTimer = setTimeout(() => {\n            dispatch(verifyTokenAsync(true));\n        }, moment(expiredAt).diff() - 10 * 1000);\n        return () => {\n            clearTimeout(verifyTokenTimer);\n        }\n    }, [expiredAt, token])\n\n    return (\n\n        <div>\n            Add a new team <br /><br />\n            <div>\n                Team Name <br />\n                <input type=\"text\" {...teamName} autoComplete=\"off\" />\n            </div>\n            <div style={{ marginTop: 10 }}>\n                Team Tag <br />\n                <input type=\"text\" {...teamTag} autoComplete=\"off\" />\n            </div>\n            <div style={{ marginTop: 10 }}>\n                Game <br />\n                <input type=\"radio\" {...game} value = \"League of Legends\" name = \"game\" autoComplete=\"off\" /> League of Legends <br />\n                <input type=\"radio\" {...game} value = \"Counter Strike: Global Offensive\"name = \"game\" autoComplete=\"off\" /> Couter Strike: Global Offensive <br />\n                <input type=\"radio\" {...game} value = \"Dota 2\"name = \"game\" autoComplete=\"off\" /> Dota 2 <br />\n            </div>\n            <div style={{ marginTop: 10 }}>\n                Team Member #1 <br />\n                <input type=\"text\" {...teamMember1} autoComplete=\"off\" /><br />\n                Team Member #2 <br />\n                <input type=\"text\" {...teamMember2} autoComplete=\"off\" /><br />\n                Team Member #3 <br />\n                <input type=\"text\" {...teamMember3} autoComplete=\"off\" /><br />\n                Team Member #4 <br />\n                <input type=\"text\" {...teamMember4} autoComplete=\"off\" /><br />\n                Team Member #5 <br />\n                <input type=\"text\" {...teamMember5} autoComplete=\"off\" /><br />\n            </div>\n            <input\n                type=\"button\"\n                style={{ marginTop: 10 }}\n                value={addTeamLoading ? 'Adding...' : 'Add new team'}\n                onClick={handleAddTeam}\n                disabled={addTeamLoading} />\n            {addTeamMessage \n                ? <div  style = {{color: 'green', marginTop: 10 }}> {addTeamMessage}</div>\n                : <div  style = {{color: 'red', marginTop: 10 }}> {addTeamError}</div>\n            }\n        </div>\n    )\n}\n\nconst useFormInput = initialValue => {\n    const [value, setValue] = useState(initialValue);\n\n    const handleChange = e => {\n        setValue(e.target.value);\n    }\n    return {\n        value,\n        onChange: handleChange\n    }\n}\n\nexport default AddTeam;"]},"metadata":{},"sourceType":"module"}